SciPy 最近进行了大规模的 Fortran 代码重写，将旧的、几乎没有维护的 F77 代码重写为 C、Cython 或纯 Python。

我在收尾阶段（？）参与到其中，审阅并发现了一些小BUG（~~ENH: typo fix~~），下文记录一些重写过程中的见闻。

## TODO
- [ ] 知乎提问：如何看待 SciPy 用 C 重写了大部分 fortran 依赖？
- [ ] 统计重写的一些统计数据，旧 F77 长度，新实现的长度
- [ ] 可能的英文翻译，放到 julia dis-en


## 重写的起因
> 当代码的存在时间与长度的乘积大于过大时，它就坍缩成了一个黑洞。
> F77 过于神秘了以至于变成了不可维护的黑河
+ scipy 的重写讨论
+ gfortran 的问题
+ fortran 论坛的 NASA fortran 语言报告
++ 番外：一些重写尝试：julia AMOS 转译；specfun F90 翻译
++ 番外：LAPACK 对引入 C++ 的讨论

## fortran 的现代化
> 我们有现代化的 fortran 标准，但或许还没有一个现代化的实现（？）
+ 代码维护是有成本的，新标准得由人来实现
+ lfortran 与 llvm-flang
+ flang 重命名小故事
++ 番外：lfortran 转译器


## AI 与遗留代码替换
> LLM 立大功 && 背大锅
+ LLM yyds
+ LLM 总能给我整点花活：举例翻译问题
+ 给你 5s 找出以下代码中的 bug（其实没有bug/有逻辑上的bug/数值计算非最佳实践）
++ 番外：新的 fortran 优化库：基于新方法开发的遗留代码替换


## 代码覆盖率测试
> 未测试的代码充满了错误
>
> 关于我是怎么找到 BUG 的
+ isequal OR isapprox
+ libc 的实现精度
+ specfun 的 f90 重写，是等价的吗？
++ 番外：就问你短不短吧（NCR），就问你快不快吧（invsqrt）


## 当书本与（现实）实现分道扬镳
> 选择困难症，我感觉几个标题都挺好：
> - 当书本与现实分道扬镳
> - 当书本与实现分道扬镳
> - 当书本与现实实现分道扬镳
> - 当书本与（现实）实现分道扬镳
+ specfun 的文本与实现
+ 番外：NRC 的实现


## 未完待续
> 贡献者！还有很多 TODO 没做还不能休息哦~
>
> 不想加入 SciPy 的贡献者行列吗？

+ SciPy 的测试并不完善，甚至没有代码覆盖率的 CI！
    难度评级：scipy 的编译有选项可以直接生成覆盖率报告，加一个 CI 那不是有手就行？
+ 加入 lfortran 开发：“做大做强，再创辉煌”
+ 把 Scipy 重写后的 fortran 替代库拆分出来，做好测试+C-API。造福社会
    难度评级：注意版权、有手就行。或许可以给 R 做点贡献，或者写几个 Matlab / Baltam 的工具箱
+ 
